# 麻雀推荐系统(SparrowRecSys) - 完成实验1与2版本

## 🎯 项目简介

这是一个完整的推荐系统项目，包含了机器学习推荐算法的完整实现，特别完成了**实验1：热度推荐**和**实验2：动态模型管理**功能。

## 📋 系统要求

- **Java**: JDK 8 或以上版本
- **Maven**: 3.6 或以上版本
- **操作系统**: Windows, macOS, Linux

## 🚀 快速启动

### 1. 编译项目
```bash
cd SparrowRecSys
mvn clean compile
```

### 2. 启动服务器
```bash
mvn exec:java -Dexec.mainClass="com.sparrowrecsys.online.RecSysServer"
```

### 3. 访问网站
打开浏览器访问: `http://localhost:6010`

## 🎯 已实现的核心功能

### ✅ 实验1：热度推荐算法
- **位置**: 主页顶部的"热度推荐"区域
- **功能**: 基于电影评分数量的热度排序推荐
- **算法**: 使用评分次数作为热度指标
- **数据**: 支持116万条评分数据

### ✅ 实验2：动态模型管理
- **位置**: 主页顶部的"推荐模型选择"区域
- **功能**: 
  - 模型版本切换（标准版本 ↔ 大数据集版本）
  - 实时模型状态显示
  - 动态加载不同质量的embedding模型
- **API接口**: 
  - `GET /getmodel?action=list` - 获取可用模型列表
  - `POST /getmodel` - 切换模型版本

## 🛠️ 项目结构

```
SparrowRecSys/
├── src/main/java/                    # Java源代码
│   └── com/sparrowrecsys/
│       ├── online/                   # 在线服务模块
│       │   ├── service/              # 核心服务类
│       │   ├── datamanager/          # 数据管理
│       │   └── recprocess/           # 推荐算法实现
│       └── offline/                  # 离线训练模块
├── src/main/resources/webroot/       # Web资源文件
│   ├── sampledata/                   # 样本数据
│   ├── modeldata/                    # 模型文件
│   └── *.html                        # 前端页面
├── RecPySpark/                       # Python Spark代码
├── TFRecModel/                       # TensorFlow模型
└── pom.xml                          # Maven配置文件
```

## 📊 数据说明

### 电影数据
- **文件**: `src/main/resources/webroot/sampledata/movies.csv`
- **数量**: 982部电影 (ID: 1-1000)
- **字段**: movieId, title, genres

### 评分数据
- **文件**: `src/main/resources/webroot/sampledata/ratings.csv`
- **数量**: 116万条评分记录
- **字段**: userId, movieId, rating, timestamp

### 模型文件
- **标准版本**: `item2vecEmb.csv`, `userEmb.csv`
- **大数据集版本**: `item2vecEmb_large.csv`, `userEmb_large.csv`

## 🔧 常用操作

### 热度推荐测试
1. 启动服务器后访问主页
2. 观察"热度推荐"区域的电影排序
3. 点击电影卡片查看详细信息

### 模型切换测试
1. 在主页顶部找到"推荐模型选择"区域
2. 选择不同的模型版本
3. 点击"切换模型"按钮
4. 观察状态变化和推荐结果差异

### API测试
```bash
# 获取模型列表
curl "http://localhost:6010/getmodel?action=list"

# 切换到大数据集版本
curl -X POST -d "action=switch&version=LARGE" "http://localhost:6010/getmodel"

# 切换到标准版本
curl -X POST -d "action=switch&version=STANDARD" "http://localhost:6010/getmodel"
```

## 🎨 核心算法实现

### 热度推荐算法
- **文件**: `RecForYouProcess.java`
- **逻辑**: 根据电影的评分数量进行降序排序
- **优化**: 考虑了评分时间的时效性

### Embedding相似度计算
- **文件**: `SimilarMovieProcess.java`
- **算法**: 余弦相似度计算
- **应用**: 电影相似推荐和用户兴趣匹配

## 🚨 常见问题

### 1. 端口被占用
如果遇到"Address already in use"错误：
```bash
# 查找占用6010端口的进程
lsof -i :6010

# 杀死占用进程
kill -9 <进程ID>
```

### 2. 编译失败
确保Java和Maven版本正确：
```bash
java -version  # 应显示1.8或以上
mvn -version   # 应显示3.6或以上
```

### 3. 页面加载缓慢
首次启动时需要加载大量数据文件，请耐心等待约30-60秒。

## 📞 技术支持

- **原项目**: [SparrowRecSys GitHub](https://github.com/wzhe06/SparrowRecSys)
- **开发者**: Wang Zhe
- **完成实验**: 实验1（热度推荐）+ 实验2（动态模型管理）

## 📝 更新日志

- ✅ 实现热度推荐算法
- ✅ 实现动态模型管理功能
- ✅ 优化用户界面显示
- ✅ 修复黄色提示条问题
- ✅ 完善API接口文档

---

**注意**: 此版本专为学习和实验目的设计，包含完整的推荐系统核心功能实现。
